sendTelegramAlert('Product Details Viewed (AirPods Pro 2)');
        }
    }

    if (currentYearSpan) {
        currentYearSpan.textContent = new Date().getFullYear();
    }

    function setupModalLink(linkEl, pageEl, modalName) { // Added modalName for tracking
        if (linkEl && pageEl) {
            linkEl.onclick = (e) => { 
                e.preventDefault(); 
                pageEl.style.display = 'flex'; 
                sendTelegramAlert('Policy Modal Opened', { modal: modalName });
            };
            const policyCloseBtn = pageEl.querySelector('.policy-content .close-btn');
            if (policyCloseBtn) {
                policyCloseBtn.onclick = () => { pageEl.style.display = 'none'; };
            }
        }
    }

    setupModalLink(aboutLink, aboutPage, 'À Propos');
    setupModalLink(privacyLink, privacyPage, 'Confidentialité');
    setupModalLink(termsLink, termsPage, 'Conditions');
    setupModalLink(supportLink, supportPage, 'Support');
    setupModalLink(contactLink, contactPage, 'Contact');

    document.querySelectorAll('.policy-modal').forEach(modal => {
        modal.addEventListener('click', function(event) {
            if (event.target === this) {
                this.style.display = 'none';
            }
        });
    });

    featureImages.forEach(img => {
        img.onerror = function() {
            this.src='https://placehold.co/600x400/cccccc/ffffff?text=Image+Indisponible';
            this.alt='Image indisponible';
        };
    });

    // Initial Page Load Tracking
    window.addEventListener('load', () => {
        sendTelegramAlert('Page Loaded (AirPods Pro 2 Offer)');
        if (orderBtn) { 
            setTimeout(() => {
                if(orderBtn) { // Check again, element might be removed
                    originalOrderBtnOffsetTop = orderBtn.getBoundingClientRect().top + window.scrollY;
                }
                handleScroll(); 
            }, 200); 
        }
    });
    </script>

    </body>
</html>
